<div id="background-container" class="background-container">
    <div id="video-container" class="video-container">
        <video src="/videos/fly-through.mp4" id="bg-video"></video>
    </div>
</div>
<div class="scroll-container" id="scroll-container">
    <section class="step">
        <div>
            <h3>My</h3>
        </div>
    </section>
    <section class="step">
        <div>
            <h3>Name</h3>
        </div>
    </section>
    <section class="step">
        <div>
            <h3>Is</h3>
        </div>
    </section>
    <section class="step">
        <div>
            <h3>Andy</h3>
        </div>
    </section>
    <section class="step">
        <div>
            <h3>Babbage</h3>
        </div>
    </section>
</div>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"
    is:inline
></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"
    is:inline
></script>
<script is:inline>
    gsap.registerPlugin(ScrollTrigger);
    const video = document.querySelector("#bg-video");
    video.pause();
    video.currentTime = 0;

    let sections = gsap.utils.toArray(".step");
    sections.forEach((step, i) => {
        ScrollTrigger.create({
            trigger: step,
            start: "bottom bottom",
            end: "+=1000",
            pin: true,
            anticipatePin: 1,
        });

        gsap.fromTo(
            video,
            { currentTime: 3 * i },
            {
                scrollTrigger: {
                    trigger: step,
                    scrub: 2,
                    start: "top bottom",
                    end: "bottom bottom",
                },
                currentTime: 3 * (i + 1),
                duration: 1,
                ease: "none",
            }
        );
    });

    gsap.to("#bg-video", {
        scrollTrigger: {
            scrub: true,
        },
        scale: 1.5,
    });
</script>

<style>
    #background-container {
        position: fixed;
        display: flex;
        aligh-items: center;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 100vh;
        overflow: hidden;
        flex-direction: row;
    }

    #video-container {
        flex: 1;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
    }

    #scroll-container {
        overflow: hidden;
    }

    #bg-video {
        flex: 1;
        background: black;
        opacity: 1;
        visibility: visible;
    }

    .step {
        display: flex;
        flex-direction: columns;
        justify-content: flex-end;
        position: relative;
        width: 100%;
        height: 100%;
    }

    .step > div {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: columns;
        height: 100vh;
        color: #fff;
        font-weight: 700;
        font-size: 40px;
        text-shadow: 2px 2px black;
        opacity: 1;
    }
</style>
